<?php

// BEGIN DATA

$data = [
    'county' => 'Snohomish County, Washington',
    'createdAt' => '2023-07-28T21:53:07.3850-4:00',
    'oneUnitConforming' => [
        '1970' => 33000,
        '1971' => 33000,
        '1972' => 33000,
        '1973' => 33000,
        '1974' => 33000,
        '1975' => 33000,
        '1976' => 33000,
        '1977' => 60000,
        '1978' => 60000,
        '1979' => 67500,
        '1980' => 93750,
        '1981' => 98500,
        '1982' => 107000,
        '1983' => 108300,
        '1984' => 114000,
        '1985' => 115300,
        '1986' => 133250,
        '1987' => 153100,
        '1988' => 168700,
        '1989' => 187600,
        '1990' => 187450,
        '1991' => 191250,
        '1992' => 202300,
        '1993' => 203150,
        '1994' => 203150,
        '1995' => 203150,
        '1996' => 207000,
        '1997' => 214600,
        '1998' => 227150,
        '1999' => 240000,
        '2000' => 252700,
        '2001' => 275000,
        '2002' => 300700,
        '2003' => 322700,
        '2004' => 333700,
        '2005' => 359650,
        '2006' => 417000,
        '2007' => 417000,
        '2008' => 417000,
        '2009' => 567500,
        '2010' => 567500,
        '2011' => 506000,
        '2012' => 506000,
        '2013' => 506000,
        '2014' => 506000,
        '2015' => 517500,
        '2016' => 540500,
        '2017' => 592250,
        '2018' => 667000,
        '2019' => 726525,
        '2020' => 741750,
        '2021' => 776250,
        '2022' => 891250,
        '2023' => 977500
    ],
    'twoUnitConforming' => [
        '1980' => 120000,
        '1981' => 126000,
        '1982' => 136800,
        '1983' => 138500,
        '1984' => 145800,
        '1985' => 147500,
        '1986' => 170450,
        '1987' => 195850,
        '1988' => 215800,
        '1989' => 239950,
        '1990' => 239750,
        '1991' => 244650,
        '1992' => 258800,
        '1993' => 259850,
        '1994' => 259850,
        '1995' => 259850,
        '1996' => 264750,
        '1997' => 274550,
        '1998' => 290650,
        '1999' => 307100,
        '2000' => 323400,
        '2001' => 351950,
        '2002' => 384900,
        '2003' => 413100,
        '2004' => 427150,
        '2005' => 460400,
        '2006' => 533850,
        '2007' => 533850,
        '2008' => 533850,
        '2009' => 726500,
        '2010' => 726500,
        '2011' => 647750,
        '2012' => 647750,
        '2013' => 647750,
        '2014' => 647750,
        '2015' => 662500,
        '2016' => 691950,
        '2017' => 758200,
        '2018' => 853900,
        '2019' => 930300,
        '2020' => 949600,
        '2021' => 993750,
        '2022' => 1140950,
        '2023' => 1251400
    ],
    'threeUnitConforming' => [
        '1980' => 145000,
        '1981' => 152000,
        '1982' => 165100,
        '1983' => 167200,
        '1984' => 176100,
        '1985' => 178200,
        '1986' => 205950,
        '1987' => 236650,
        '1988' => 260800,
        '1989' => 290000,
        '1990' => 289750,
        '1991' => 295650,
        '1992' => 312800,
        '1993' => 314100,
        '1994' => 314100,
        '1995' => 314100,
        '1996' => 320050,
        '1997' => 331850,
        '1998' => 351300,
        '1999' => 371200,
        '2000' => 390900,
        '2001' => 425400,
        '2002' => 465200,
        '2003' => 499300,
        '2004' => 516300,
        '2005' => 556500,
        '2006' => 645300,
        '2007' => 645300,
        '2008' => 645300,
        '2009' => 878150,
        '2010' => 878150,
        '2011' => 783000,
        '2012' => 783000,
        '2013' => 783000,
        '2014' => 783000,
        '2015' => 800800,
        '2016' => 836400,
        '2017' => 916450,
        '2018' => 1032150,
        '2019' => 1124475,
        '2020' => 1147800,
        '2021' => 1201200,
        '2022' => 1379150,
        '2023' => 1512650
    ],
    'fourUnitConforming' => [
        '1980' => 180000,
        '1981' => 189000,
        '1982' => 205300,
        '1983' => 207900,
        '1984' => 218900,
        '1985' => 256000,
        '1986' => 256000,
        '1987' => 294150,
        '1988' => 324150,
        '1989' => 360450,
        '1990' => 360150,
        '1991' => 367500,
        '1992' => 388800,
        '1993' => 390400,
        '1994' => 390400,
        '1995' => 390400,
        '1996' => 397800,
        '1997' => 412450,
        '1998' => 436600,
        '1999' => 461350,
        '2000' => 485800,
        '2001' => 528700,
        '2002' => 578150,
        '2003' => 620500,
        '2004' => 641650,
        '2005' => 691600,
        '2006' => 801950,
        '2007' => 801950,
        '2008' => 801950,
        '2009' => 1091350,
        '2010' => 1091350,
        '2011' => 973100,
        '2012' => 973100,
        '2013' => 973100,
        '2014' => 973100,
        '2015' => 995200,
        '2016' => 1039450,
        '2017' => 1138950,
        '2018' => 1282700,
        '2019' => 1397400,
        '2020' => 1426450,
        '2021' => 1492800,
        '2022' => 1713950,
        '2023' => 1879850
    ],
    'oneUnitFha' => [
        '2008' => 567500,
        '2009' => 567500,
        '2010' => 567500,
        '2011' => 567500,
        '2012' => 567500,
        '2013' => 567500,
        '2014' => 506000,
        '2015' => 517500,
        '2016' => 540500,
        '2017' => 592250,
        '2018' => 667000,
        '2019' => 726525,
        '2020' => 741750,
        '2021' => 776250,
        '2022' => 891250,
        '2023' => 977500
    ],
    'twoUnitFha' => [
        '2008' => 726500,
        '2009' => 726500,
        '2010' => 726500,
        '2011' => 726500,
        '2012' => 726500,
        '2013' => 647750,
        '2014' => 726500,
        '2015' => 662500,
        '2016' => 691950,
        '2017' => 758200,
        '2018' => 853900,
        '2019' => 930300,
        '2020' => 949600,
        '2021' => 993750,
        '2022' => 1140950,
        '2023' => 1251400
    ],
    'threeUnitFha' => [
        '2008' => 878150,
        '2009' => 878150,
        '2010' => 878150,
        '2011' => 878150,
        '2012' => 878150,
        '2013' => 783000,
        '2014' => 878150,
        '2015' => 800800,
        '2016' => 836400,
        '2017' => 916450,
        '2018' => 1032150,
        '2019' => 1124475,
        '2020' => 1147800,
        '2021' => 1201200,
        '2022' => 1379150,
        '2023' => 1512650
    ],
    'fourUnitFha' => [
        '2008' => 1091350,
        '2009' => 1091350,
        '2010' => 1091350,
        '2011' => 1091350,
        '2012' => 1091350,
        '2013' => 973100,
        '2014' => 1091350,
        '2015' => 995200,
        '2016' => 1039450,
        '2017' => 1138950,
        '2018' => 1282700,
        '2019' => 1397400,
        '2020' => 1426450,
        '2021' => 1492800,
        '2022' => 1713950,
        '2023' => 1879850
    ],
    'nearby' => [
        'chelan-county-washington' => 'Chelan County, Washington',
        'island-county-washington' => 'Island County, Washington',
        'king-county-washington' => 'King County, Washington',
        'kitsap-county-washington' => 'Kitsap County, Washington',
        'skagit-county-washington' => 'Skagit County, Washington'
    ],
    'cities' => [
        'Alderwood Manor',
        'Arlington',
        'Arlington Heights',
        'Bothell East',
        'Bothell West',
        'Brier',
        'Bryant',
        'Bunk Foss',
        'Canyon Creek',
        'Cathcart',
        'Cavalero',
        'Chain Lake',
        'Clearview',
        'Darrington',
        'Eastmont',
        'Edmonds',
        'Esperance',
        'Everett',
        'Fobes Hill',
        'Gold Bar',
        'Granite Falls',
        'Hat Island',
        'High Bridge',
        'Index',
        'Kayak Point',
        'Lake Bosworth',
        'Lake Cassidy',
        'Lake Goodwin',
        'Lake Ketchum',
        'Lake Roesiger',
        'Lake Stevens',
        'Lake Stickney',
        'Larch Way',
        'Lochsloy',
        'Lynnwood',
        'Machias',
        'Maltby',
        'Martha Lake',
        'Marysville',
        'May Creek',
        'Meadowdale',
        'Mill Creek',
        'Mill Creek East',
        'Monroe',
        'Monroe North',
        'Mountlake Terrace',
        'Mukilteo',
        'North Lynnwood',
        'North Sultan',
        'Northwest Stanwood',
        'Oso',
        'Picnic Point',
        'Silvana',
        'Silver Firs',
        'Sisco Heights',
        'Snohomish',
        'Stanwood',
        'Startup',
        'Sultan',
        'Sunday Lake',
        'Swede Heaven',
        'Three Lakes',
        'Verlot',
        'Warm Beach',
        'Woods Creek',
        'Woodway'
    ],
    'loanTypes' => [
        'Conventional' => 77.32,
        'FHA' => 14.3,
        'VA' => 7.49,
        'USDA' => 0.89
    ],
    'propertyTypes' => [
        '1-Unit' => 98.89,
        '2-Unit' => 0.91,
        '3-Unit' => 0.08,
        '4-Unit' => 0.12
    ],
    'borrowerStatus' => [
        'One Borrower' => 7.73,
        'Two or More Borrowers' => 92.27
    ],
    'gender' => [
        'Male' => 62.44,
        'Female' => 27.86,
        'Other' => 9.7
    ],
    'race' => [
        'American Indian or Alaska Native' => 0.66,
        'Asian' => 23.41,
        'Black or African American' => 3.11,
        'Native Hawaiian or Other Pacific Islander' => 0.48,
        'White' => 66.58,
        'Joint' => 5.76
    ],
    'ethnicity' => [
        'Hispanic or Latino' => 5.82,
        'Not Hispanic or Latino' => 90.71,
        'Joint' => 3.48
    ]
];

// END DATA

$county = $data['county'];
$countyOnly = explode(', ', $county)[0];

$date = new DateTime($data['createdAt']);
$createdAt = $date->format('F j, Y');
$year = $date->format('Y');

$title = "$year Mortgage Loan Limits for $county";
$nearby = array_map(function ($val) { return str_replace(' County', '', explode(', ', $val)[0]); }, array_slice(array_values($data['nearby']), 0, 2));
$description = "$year $county, Loan Limits: $" . number_format($data['oneUnitConforming'][$year]) . " (Conforming), $" . number_format($data['oneUnitFha'][$year]) . " (FHA). Complete list plus neighboring counties " . join(', ', $nearby) . " & others.";

$pluginOptions = get_option('hb_loan_limits', array() );
$youtubeId = $pluginOptions['youtube_id'] ?? '3AI2_FdIMts';
$youtubeDuration = $pluginOptions['youtube_duration_seconds'] ?? '505';

add_action( 'wp_head', function () {
    global $wp, $data, $title, $description, $youtubeId, $youtubeDuration;

    echo '<meta name="description" content="'. $description . '"/>' . "\n";
    echo '<meta name="robots" content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large"/>' . "\n";
    echo '<link rel="canonical" href="' . home_url( $wp->request ) . '" />' . "\n";
    echo '<meta property="og:locale" content="en_US" />' . "\n";
    echo '<meta property="og:type" content="article" />' . "\n";
    echo '<meta property="og:title" content="' . $title . '" />' . "\n";
    echo '<meta property="og:url" content="' . home_url ($wp->request ) . '" />' . "\n";
    echo '<meta property="og:description" content="'. $description . '" />' . "\n";
    echo '<meta property="og:site_name" content="Homebuyer.com" />' . "\n";
    echo '<meta property="article:publisher" content="https://facebook.com/homebuyercom" />' . "\n";
    echo '<meta property="article:tag" content="' . $title . '" />' . "\n";
    echo '<meta property="article:section" content="' . $title . '" />' . "\n";
    echo '<meta property="og:updated_time" content="' . $data['createdAt'] . '" />' . "\n";
    echo '<meta property="og:image" content="' . home_url() . '/wp-content/uploads/2022/04/homebuyer-illustation-1200px.jpeg" />' . "\n";
    echo '<meta property="og:image:secure_url" content="' . home_url() . '/wp-content/uploads/2022/04/homebuyer-illustation-1200px.jpeg" />' . "\n";
    echo '<meta property="og:image:width" content="1200" />' . "\n";
    echo '<meta property="og:image:height" content="234" />' . "\n";
    echo '<meta property="og:image:alt" content="Homebuyer.com" />' . "\n";
    echo '<meta property="og:image:type" content="image/jpeg" />' . "\n";
    echo '<meta property="article:published_time" content="2023-07-20T09:40:00-04:00" />' . "\n";
    echo '<meta property="article:modified_time" content="' . $data['createdAt'] . '" />' . "\n";
    echo '<meta property="og:video" content="https://www.youtube.com/embed/' . $youtubeId . '" />' . "\n";
    echo '<meta property="video:duration" content="' . $youtubeDuration . '" />' . "\n";
    echo '<meta name="twitter:card" content="summary_large_image" />' . "\n";
    echo '<meta name="twitter:title" content="' . $title . '" />' . "\n";
    echo '<meta name="twitter:description" content="' . $description . '" />' . "\n";
    echo '<meta name="twitter:site" content="@homebuyer" />' . "\n";
    echo '<meta name="twitter:creator" content="@homebuyer" />' . "\n";
    echo '<meta name="twitter:image" content="' . home_url() . '/wp-content/uploads/2022/04/homebuyer-illustation-1200px.jpeg" />' . "\n";
    echo '<meta name="twitter:label1" content="Written by" />' . "\n";
    echo '<meta name="twitter:data1" content="Dan Green" />' . "\n";
    echo '<meta name="twitter:label2" content="Time to read" />' . "\n";
    echo '<meta name="twitter:data2" content="10 minutes" />' . "\n";
}, 1);

add_filter( 'wp_title', function($title, $sep) {
    global $title;
    return $title;
}, 9999, 2 );

add_action( 'wp_enqueue_scripts', function () {
    wp_enqueue_style( 'hub-css', get_template_directory_uri() . '/css/hub/hub.css', array('style'), rand(111,9999), 'all' );
    wp_enqueue_style( 'loan-limits-css', get_template_directory_uri() . '/css/hub/loan-limits.css', array('style'), rand(111,9999), 'all' );
    wp_enqueue_script( 'hub-js', get_template_directory_uri() . '/js/hub/hub.js', array(), rand(111,9999), true );
    wp_enqueue_script( 'loan-limits-js', get_template_directory_uri() . '/js/hub/loan-limits.js', array(), rand(111,9999), true );
});

get_header(); ?>
<div class="hub hub-header">
    <div class="hub-container">
        <ul class="hub-breadcrumb">
            <li> <a href="<?php echo home_url(); ?>"> Home </a> / </li>
            <li> <a href="<?php echo home_url(); ?>/mortgage-loan-limits"> Mortgage Loan Limits</a> / </li>
            <li> <strong><?php echo $county; ?></strong> </li>
        </ul>
        <div class="fact-checked-container">
            <a class="fact-checked" id="fact-checked" aria-labelledby="fact-checked-notice">
                <span class="mdi mdi-check-circle"></span>
                <strong>Fact Checked</strong>
            </a>
            <div class="fact-checked-bubble" id="fact-checked-bubble" role="tooltip">
                <p class="mb-2">Each post <strong>edited</strong> and <strong>fact-checked</strong> by industry experts to ensure that we are providing accurate information for our readers.</p>
                <p class="m-0">See our full <a href="<?php echo home_url(); ?>/editorial-guidelines" target="_blank">editorial guidelines</a>.</p>
            </div>
        </div>
        <h1><?php echo $year; ?> Mortgage Loan Limits: <?php echo $county; ?></h1>
        <div class="hub-header-author">
            <?php
                // $get_author_id = get_the_author_meta('ID');
                // $get_author_gravatar = get_cupp_meta($get_author_id, 'thumbnail');
                // echo '<img src="'.$get_author_gravatar.'" alt="'.get_the_author_meta('display_name').'" />';
                echo '<img src="' . home_url() . '/wp-content/uploads/2023/01/Dan_Green_-_Headshot_-_2022-150x150.jpg" alt="Dan Green" />';
            ?>
            <div>
                <div>Author: <?php /* the_author_posts_link(); */ echo '<a href="' . home_url() . '/author/dan-green">Dan Green</a>'; ?></div>
                <div>Last Updated: <?php echo $createdAt; ?></div>
            </div>
        </div>
        <div class="hub-header-notice">
            Our advice is based on experience in the mortgage industry and we are dedicated to helping you achieve your goal of owning a home. We may receive compensation from partner banks when you view mortgage rates listed on our website.
        </div>
    </div>
    <div class="ll-search">
        <small>Find the mortgage loan limits for any U.S. address</small>
        <div>
            <span class="mdi mdi-magnify"></span>
            <input id="county-lookup" placeholder="Search by county, city, or address…" type="text" autocomplete="off">
            <button id="county-lookup-button" disabled class="hb-button disabled">Search</button>
            <script>
              (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
                key: "AIzaSyALXddRh9W1cKulloc4OGdlhgiEoU9cr1k",
                v: "beta",
              });
            </script>
            <script>
                window.addEventListener('load', function () {
                   initSearch('<?php echo home_url(); ?>'); 
                });
            </script>
        </div>
    </div>
</div>
<div class="hub hub-main">
    <div class="hub-container">
        <h3><?php echo $title; ?></h3>
        <div class="hub-table">
            <div class="hub-table-header">
                <div id="ll-conforming-table-tab" class="hub-table-tab active">Conforming Loans</div>
                <div id="ll-fha-table-tab" class="hub-table-tab">FHA Loans</div>
            </div>
            <div id="ll-conforming-table" class="hub-table-body active">
                <div class="hub-table-row">
                    <div><strong>Property Type</strong></div>
                    <div><strong><?php echo $year; ?> Loan Limit</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>1-Unit Homes</div>
                    <div>$<?php echo number_format($data['oneUnitConforming'][$year]); ?></div>
                </div>
                <div class="hub-table-row">
                    <div>2-Unit Homes</div>
                    <div>$<?php echo number_format($data['twoUnitConforming'][$year]); ?></div>
                </div>
                <div class="hub-table-row">
                    <div>3-Unit Homes</div>
                    <div>$<?php echo number_format($data['threeUnitConforming'][$year]); ?></div>
                </div>
                <div class="hub-table-row">
                    <div>4-Unit Homes</div>
                    <div>$<?php echo number_format($data['fourUnitConforming'][$year]); ?></div>
                </div>
            </div>
            <div id="ll-fha-table" class="hub-table-body" style="display: none;">
                <div class="hub-table-row">
                    <div><strong>Property Type</strong></div>
                    <div><strong><?php echo $year; ?> Loan Limit</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>1-Unit Homes</div>
                    <div>$<?php echo number_format($data['oneUnitFha'][$year]); ?></div>
                </div>
                <div class="hub-table-row">
                    <div>2-Unit Homes</div>
                    <div>$<?php echo number_format($data['twoUnitFha'][$year]); ?></div>
                </div>
                <div class="hub-table-row">
                    <div>3-Unit Homes</div>
                    <div>$<?php echo number_format($data['threeUnitFha'][$year]); ?></div>
                </div>
                <div class="hub-table-row">
                    <div>4-Unit Homes</div>
                    <div>$<?php echo number_format($data['fourUnitFha'][$year]); ?></div>
                </div>
            </div>
        </div>
        <div>
            <small>Source: Federal Housing Finance Agency; Federal Housing Administration</small>
        </div>
        <div class="ll-map-container">
            <h4><?php echo $county; ?>, mortgage loan limits apply in:</h4>
            <div id="ll-map"></div>
            <small><?php echo $countyOnly . " $year mortgage loan limits include the following cities: " . join(', ', $data['cities']); ?></small>
        </div>
        <script>
            window.addEventListener('load', function () {
                renderMap("<?php echo $county; ?>");
            });
        </script>
        <h2>What is a mortgage loan limit?</h2>
        <p><a href="<?php echo home_url(); ?>/mortgage-loan-limits">Mortgage loan limits</a> are the upper boundaries for how much a home buyer can borrow on a mortgage. Loan limits vary by county and home type.</p>
        <p>The Federal Housing Finance Agency (FHFA) sets mortgage loan limits for conforming mortgages and the Federal Housing Administration (FHA) sets loan limits for <a href="<?php echo home_url(); ?>/learn/fha-loans">FHA mortgages</a>.  In <?php echo $countyOnly; ?>, the <?php echo $year; ?> conforming mortgage loan limit for a 1-unit home is $<?php echo number_format($data['oneUnitConforming'][$year]); ?>. The <?php echo $year; ?> FHA mortgage loan limit for a 1-unit home is $<?php echo number_format($data['oneUnitFha'][$year]); ?>.</p>
        <p>Conforming and FHA mortgage loan limits change annually to reflect changes in local and national home values. Loans that exceed conforming loan limit sizes are commonly called jumbo mortgages. As of <?php echo $year; ?>, there are no mortgage loan limits for <a href="<?php echo home_url(); ?>/learn/va-loans">VA loans</a> or <a href="<?php echo home_url(); ?>/learn/what-is-a-usda-loan">USDA loans</a>.</p>
        <div class="hub-video-container">
            <div class="hub-video">
                <?php echo do_shortcode("[lyte id='$youtubeId']"); ?>
            </div>
            <small>Video Length: <?php echo gmdate("i:s", $youtubeDuration); ?></small>
        </div>
        <h2>Mortgage Loan Limits Near <?php echo $county; ?></h2>
        <p>Get <?php echo $year; ?> conforming and FHA mortgage loan limits for the areas surrounding <?php echo $county; ?>. Local loan limits and county-level mortgage data updated regularly.</p>
        <h3>View Nearby Counties:</h3>
        <div class="hub-cards-container">
            <?php foreach ($data['nearby'] as $key => $value) { ?>
                <a href="<?php echo home_url(); ?>/mortgage-loan-limits/<?php echo $key; ?>" class="hub-card">
                    <div class="title"><?php echo $value; ?></div>
                    <p>View Loan Limits →</p>
                </a>
            <?php } ?>
            <a href="<?php echo home_url(); ?>/mortgage-loan-limits" class="hub-card">
                <div class="title">National Data</div>
                <p>View Loan Limits →</p>
            </a>
        </div>
        <h2>Historical Charts: Mortgage Loan Limits in <?php echo $county; ?></h2>
        <p>Mortgage loan limits adjust annually to match changes in U.S. home values. As home values go up or down in <?php echo $countyOnly; ?>, so do the local loan limits. Changes in mortgage loan limits promote affordable homeownership, fair lending, and a balanced housing market.</p>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
        <div class="hub-chart-container">
            <div class="hub-chart-header">
                <div id="ll-conforming-chart-tab" class="hub-chart-tab active">Conforming Loans</div>
                <div id="ll-fha-chart-tab" class="hub-chart-tab">FHA Loans</div>
            </div>
            <div id="ll-conforming-chart" class="hub-chart-body active">
                <canvas id="ll-conforming-canvas"></canvas>
            </div>
            <div id="ll-fha-chart" class="hub-chart-body" style="display: none;">
                <canvas id="ll-fha-canvas"></canvas>
            </div>
        </div>
        <script>
            window.addEventListener('load', function () {
                const conforming = {
                    oneUnit: <?php echo json_encode($data['oneUnitConforming']); ?>,
                    twoUnit: <?php echo json_encode($data['twoUnitConforming']); ?>,
                    threeUnit: <?php echo json_encode($data['threeUnitConforming']); ?>,
                    fourUnit: <?php echo json_encode($data['fourUnitConforming']); ?>,
                };
                const fha = {
                    oneUnit: <?php echo json_encode($data['oneUnitFha']); ?>,
                    twoUnit: <?php echo json_encode($data['twoUnitFha']); ?>,
                    threeUnit: <?php echo json_encode($data['threeUnitFha']); ?>,
                    fourUnit: <?php echo json_encode($data['fourUnitFha']); ?>,
                };
                renderCharts(conforming, fha);
            });
        </script>
        <?php if (count($data['loanTypes'])) { ?>
        <h2 id="mortgage-stats">Mortgage Statistics from <?php echo $county; ?></h2>
        <p>Mortgage statistics for <?php echo $countyOnly; ?>, sourced from the Home Mortgage Disclosure Act (HMDA) database, maintained by the Federal Financial Institutions Examination Council (<a href="https://ffiec.cfpb.gov/">FFIEC</a>). The HMDA database contains detailed, anonymous loan data and provides insight into home buyer traits, mortgage borrowing patterns, and mortgage approval rates. Percentages may not total 100% due to rounding.</p>
        <!--<p>For more insight into consumer borrowing and mortgage lending patterns in the area, check out our detailed <?php echo $county; ?>, <a href="#">mortgage data study</a>.</p>-->
        <div class="hub-table">
            <div class="hub-table-header">
                <h3><?php echo "$county (2018-2022)"; ?></h3>
            </div>
            <div class="hub-table-body active compact mb-32">
                <div class="hub-table-row">
                    <div><strong>Loan Type</strong></div>
                    <div><strong>Relative Share</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>Conventional</div>
                    <div><?php echo number_format($data['loanTypes']['Conventional'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>FHA</div>
                    <div><?php echo number_format($data['loanTypes']['FHA'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>VA</div>
                    <div><?php echo number_format($data['loanTypes']['VA'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>USDA</div>
                    <div><?php echo number_format($data['loanTypes']['USDA'], 2); ?>%</div>
                </div>
            </div>
            <div class="hub-table-body active compact mb-32">
                <div class="hub-table-row">
                    <div><strong>Property Type</strong></div>
                    <div><strong>Relative Share</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>1-Unit Homes</div>
                    <div><?php echo number_format($data['propertyTypes']['1-Unit'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>2-Unit Homes</div>
                    <div><?php echo number_format($data['propertyTypes']['2-Unit'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>3-Unit Homes</div>
                    <div><?php echo number_format($data['propertyTypes']['3-Unit'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>4-Unit Homes</div>
                    <div><?php echo number_format($data['propertyTypes']['4-Unit'], 2); ?>%</div>
                </div>
            </div>
            <div class="hub-table-body active compact mb-32">
                <div class="hub-table-row">
                    <div><strong>Borrower Status</strong></div>
                    <div><strong>Relative Share</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>One Borrower</div>
                    <div><?php echo number_format($data['borrowerStatus']['One Borrower'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Two or More Borrowers</div>
                    <div><?php echo number_format($data['borrowerStatus']['Two or More Borrowers'], 2); ?>%</div>
                </div>
            </div>
            <div class="hub-table-body active compact mb-32">
                <div class="hub-table-row">
                    <div><strong>Gender</strong></div>
                    <div><strong>Relative Share</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>Male</div>
                    <div><?php echo number_format($data['gender']['Male'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Female</div>
                    <div><?php echo number_format($data['gender']['Female'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Not Specified</div>
                    <div><?php echo number_format($data['gender']['Other'], 2); ?>%</div>
                </div>
            </div>
            <div class="hub-table-body active compact mb-32">
                <div class="hub-table-row">
                    <div><strong>Race</strong></div>
                    <div><strong>Relative Share</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>American Indian / Alaska Native</div>
                    <div><?php echo number_format($data['race']['American Indian or Alaska Native'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Asian</div>
                    <div><?php echo number_format($data['race']['Asian'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Black / African American</div>
                    <div><?php echo number_format($data['race']['Black or African American'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Native Hawaiian / Other Pacific Islander</div>
                    <div><?php echo number_format($data['race']['Native Hawaiian or Other Pacific Islander'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>White</div>
                    <div><?php echo number_format($data['race']['White'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Other</div>
                    <div><?php echo number_format($data['race']['Joint'], 2); ?>%</div>
                </div>
            </div>
            <div class="hub-table-body active compact">
                <div class="hub-table-row">
                    <div><strong>Ethnicity</strong></div>
                    <div><strong>Relative Share</strong></div>
                </div>
                <div class="hub-table-row">
                    <div>Hispanic or Latino</div>
                    <div><?php echo number_format($data['ethnicity']['Hispanic or Latino'], 2); ?>%</div>
                </div>
                <div class="hub-table-row">
                    <div>Not Hispanic or Latino</div>
                    <div><?php echo number_format($data['ethnicity']['Not Hispanic or Latino'], 2); ?>%</div>
                </div>
            </div>
        </div>
        <div class="mb-56">
            <small><?php echo $countyOnly; ?> data represents closed-end, first-lien purchase mortgages for residential properties, 1-4 units, for the 5-year period 2018-2022. Source: FFEIC Home Mortgage Disclosure Act</small>
        </div>
        <?php } ?>
        <h2>Mortgage Statistics Near <?php echo $data['county']; ?></h2>
        <p>Get mortgage statistics for the areas surrounding <?php echo $data['county']; ?>. </p>
        <div class="hub-cards-container">
            <?php foreach ($data['nearby'] as $key => $value) { ?>
                <a href="<?php echo home_url(); ?>/mortgage-loan-limits/<?php echo $key; ?>#mortgage-stats" class="hub-card">
                    <div class="title"><?php echo $value; ?></div>
                    <p>View Statistics →</p>
                </a>
            <?php } ?>
            <a href="<?php echo home_url(); ?>/mortgage-loan-limits#mortgage-stats" class="hub-card">
                <div class="title">National Data</div>
                <p>View Statistics →</p>
            </a>
        </div>
        <a class="hub-cta-box" href="<?php echo home_url(); ?>/learn/hmda-mortgage-statistics">
            <div>
                <p>See National <?php echo $year; ?> U.S.  Mortgage Statistics </p>
                <button class="hb-button secondary">
                    Read the Report
                </button>
            </div>
            <div>
                <img alt="Pie chart illustration" src="<?php echo get_template_directory_uri(); ?>/images/quirky-pie-chart-with-annotations.svg">
            </div>
        </a>
        <h2>See Today’s Mortgage Rates in <?php echo $county; ?></h2>
        <p>Homebuyer.com is the mortgage company for first-time home buyers. Check your eligibility for <a href="<?php echo home_url(); ?>/learn/first-time-home-buyer-grants-programs">first-time home buyer programs</a> and look at today's low down-payment mortgages. Get pre-approved online in just three minutes.</p>
        <div class="ll-cta">
            <a class="hb-button" href="https://app.homebuyer.com/start">
                Get Pre-approved
            </a>
        </div>
    </div>
</div>
<?php get_template_part('global/subscribe-newslatter'); ?>
<?php get_footer(); ?>
